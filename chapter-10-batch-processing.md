# 10장 Batch

## 요약
시스템은 세 가지로 나눌 수 있다.
(1) 온라인 시스템
(2) 오프라인 시스템
(3) 준실시간 시스템
배치는 (2) 오프라인 시스템에 속한다.

### 유닉스의 배치 처리 과정
```shell script
awk '{print $7}' |
sort             |
uniq -c          |
```
unix의 배치 파이프라인은 한개의 컴퓨터 환경에서밖에 쓰일 수 밖에 없다.  
반면 Hadoop은 여러 컴퓨터(분산 환경)에서의 배치 처리를 지원한다. 

### mapReducer
mapper: 
sorting 과정 전단계다. sorting 과정에 들어갈 데이터를 준비한다.  
위 unix 예시의 `awk '{print $7}'`에 대응된다.  

redurcer:
sorting 과정 후단계다. sorting 과정 이후의 데이터를 처리한다.  
위 unix 예시의 `uniq -c`에 대응된다.

## 느낀점
팀에서 배치를 많이 쓴다.
다만 모든 배치가 대용량 데이터 처리인 것은 아니다.

10장에서 사용하는 배치 단어의 의미는 세 개로 나눠서 보아야 한다.
10장에서는 다음 세 가지 의미를 혼합해서 사용하고 있다.  
(1) 임의의 시간/혹은 정기적인 시간에 수행하고, 수행이 끝나면 실행을 멈추는 프로그램.  
(2) 대용량의 데이터를 계산하는 프로그램.  
(3) input과 output을 구분하는 프로그램(input을 변경하지 않음)  

업무에서는 (1), (2), (3) 세 가지 의미의 배치를 모두 사용한다.
대용량 데이터를 계산하는 프로그램인 경우, 보통 (1)과 (3)의 특성을 함께 갖고 있다.
정기적인 시간에 동작하고, input과 output은 서로 다른 테이블로 구성한다.(input이 변하지 않는다.)
통계를 계산하는 작업을 예로 들 수 있다.
통계를 계산하는 작업은 정기적인 시간에 수행된다. 그리고 통계 테이블은 따로 만들어진다. 통계 데이터를 생성할 때 대용량 데이터를 처리한다.

대용량 데이터 처리를 하지 않는 배치 프로그램도 업무에서 흔히 볼 수 있다.
아주 적은 데이터를 업데이트 하기 위해 spring batch를 활용하여 임의의 시간에 배치를 수행한다.(운영성 이슈 해결)
또한, input 자체를 수정하는 배치도 업무에서 매우 흔하다.(RDS에서 데이터 수정)  
저자의 기준이라면, 위 업무들은 배치 프로그램이 아닐 수도 있다.


